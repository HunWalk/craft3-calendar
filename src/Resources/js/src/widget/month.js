"use strict";function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function updateDayNumberDimensions(e,t){var a=$(".fc-content-skeleton",t);$(".fc-day-number",t).css({textAlign:"center",padding:0,minHeight:a.height()+"px",lineHeight:a.height()+"px"})}var initiateMiniCal=function(e){var t=e,a=$calendar.data(),n=a.overlapThreshold,r=a.firstDayOfWeek;t.fullCalendar({defaultView:"month",nextDayThreshold:"0"+n+":00:01",fixedWeekCount:!1,eventLimit:1,firstDay:r,height:"auto",columnFormat:"dd",viewRender:updateDayNumberDimensions,windowResize:updateDayNumberDimensions,eventClick:eventClick,dayClick:function(e){window.location.href=Craft.getCpUrl("calendar/view/day/"+e.format("YYYY/MM/DD"))},events:function(e,a){$.ajax({url:Craft.getCpUrl("calendar/month"),data:_defineProperty({dateRangeStart:e.toISOString(),dateRangeEnd:a.toISOString(),nonEditable:!0,calendars:t.data("calendars")},Craft.csrfTokenName,Craft.csrfTokenValue),type:"post",dataType:"json",success:function(e){$(".fc-content-skeleton .fc-day-top.fc-has-event").removeClass("fc-has-event");var t=!0,a=!1,n=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)for(var o=r.value,d=moment(o.start).utc(),c=moment(o.end).utc();d.isBefore(c);)$(".fc-content-skeleton .fc-day-top[data-date="+d.utc().format("YYYY-MM-DD")+"]").addClass("fc-has-event"),d.add(1,"days")}catch(l){a=!0,n=l}finally{try{!t&&i["return"]&&i["return"]()}finally{if(a)throw n}}}})},header:{left:"prev",center:"title",right:"next"}})};